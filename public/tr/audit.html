<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review My Emails | Size Ne Yapmanız Gerektiğini Söyleyen E-posta Listesi Temizliği</title>
    <meta name="description" content="Doğrulama araçları adresleri görür. Biz kalıpları, bağlamı ve riski görürüz. Sonra size tam olarak ne yapmanız gerektiğini söyleriz. Net etiketler: Sakla (Keep), İzle (Monitor), Kaldır (Suppress). Her birinin arkasındaki gerekçeyle birlikte.">
    <link rel="canonical" href="https://reviewmyemails.com/audit/">

    <!-- Open Graph -->
    <meta property="og:title" content="Review My Emails | Size Ne Yapmanız Gerektiğini Söyleyen E-posta Listesi Temizliği">
    <meta property="og:description" content="Doğrulama araçları adresleri görür. Biz kalıpları görürüz. Riski tanımlar ve size tam olarak bir sonraki adımın ne olduğunu söyleriz.">
    <meta property="og:url" content="https://reviewmyemails.com/audit/">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://reviewmyemails.com/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Review My Emails | Size Ne Yapmanız Gerektiğini Söyleyen E-posta Listesi Temizliği">
    <meta name="twitter:description" content="Doğrulama araçları adresleri görür. Biz kalıpları görürüz. Riski tanımlar ve size tam olarak bir sonraki adımın ne olduğunu söyleriz.">
    <meta name="twitter:image" content="https://reviewmyemails.com/og-image.png">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../assets/favicon/favicon.ico">
    <link rel="icon" type="image/svg+xml" href="../assets/favicon/favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/favicon/favicon.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* ========================================
           RESET & BASE
           ======================================== */

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* ========================================
           DESIGN TOKENS
           ======================================== */

        :root {
            /* Colors */
            --color-dark: #134e4a;
            --color-accent: #0d9488;
            --color-accent-hover: #0f766e;
            --color-white: #fafcfc;
            --color-light: #e6f7f3;
            --color-lighter: #d1f0e8;
            --color-muted: #64748b;
            --color-border: #e2e8f0;

            /* Status Colors */
            --color-success: #16a34a;
            --color-success-bg: #dcfce7;
            --color-warning: #d97706;
            --color-warning-bg: #fef3c7;
            --color-danger: #dc2626;
            --color-danger-bg: #fee2e2;

            /* Typography */
            --font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;

            /* Spacing */
            --space-xs: 8px;
            --space-sm: 16px;
            --space-md: 24px;
            --space-lg: 40px;
            --space-xl: 64px;

            /* Layout */
            --container: 720px;
        }

        body {
            font-family: var(--font);
            font-size: 18px;
            line-height: 1.6;
            color: var(--color-dark);
            background: var(--color-lighter);
            min-height: 100vh;
        }

        /* ========================================
           LAYOUT
           ======================================== */

        .container {
            max-width: var(--container);
            margin: 0 auto;
            padding: 0 var(--space-md);
        }

        /* ========================================
           HEADER
           ======================================== */

        .header {
            background: var(--color-white);
            border-bottom: 1px solid var(--color-border);
            padding: var(--space-sm) 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header__inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header__logo img {
            height: 40px;
            width: auto;
        }

        .header__progress {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: 14px;
            color: var(--color-muted);
        }

        .header__progress-bar {
            width: 120px;
            height: 6px;
            background: var(--color-border);
            border-radius: 3px;
            overflow: hidden;
        }

        .header__progress-fill {
            height: 100%;
            background: var(--color-accent);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .header__nav {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .header__link {
            font-size: 15px;
            font-weight: 500;
            color: var(--color-muted);
            text-decoration: none;
            transition: color 180ms ease;
        }

        .header__link:hover {
            color: var(--color-dark);
        }

        .header__cta {
            display: inline-flex;
            align-items: center;
            padding: 10px 20px;
            background: var(--color-accent);
            color: white;
            font-size: 15px;
            font-weight: 600;
            text-decoration: none;
            border-radius: 8px;
            transition: background 180ms ease;
        }

        .header__cta:hover {
            background: var(--color-accent-hover);
        }

        .header__mobile-toggle {
            display: none;
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--color-dark);
        }

        .header__mobile-toggle svg {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        /* Mobile Navigation */
        .mobile-nav {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--color-white);
            z-index: 200;
            padding: 40px 24px;
            flex-direction: column;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 48px;
        }

        .mobile-nav__close {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            color: var(--color-dark);
        }

        .mobile-nav__close svg {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .mobile-nav__links {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .mobile-nav__link {
            font-size: 20px;
            font-weight: 500;
            color: var(--color-dark);
            text-decoration: none;
            padding: 16px 0;
            border-bottom: 1px solid var(--color-border);
        }

        .mobile-nav__cta {
            margin-top: 32px;
        }

        .mobile-nav__cta a {
            display: block;
            width: 100%;
            text-align: center;
            padding: 14px 24px;
            background: var(--color-accent);
            color: white;
            font-weight: 600;
            text-decoration: none;
            border-radius: 8px;
        }

        /* ========================================
           INTRO SCREEN
           ======================================== */

        .screen {
            display: none;
            padding: var(--space-xl) 0;
            min-height: calc(100vh - 73px);
        }

        .screen.active {
            display: block;
        }

        .intro {
            text-align: center;
            max-width: 560px;
            margin: 0 auto;
        }

        .intro__badge {
            display: inline-block;
            padding: 6px 14px;
            background: var(--color-light);
            border-radius: 100px;
            font-size: 13px;
            font-weight: 600;
            color: var(--color-accent);
            margin-bottom: var(--space-md);
        }

        .intro h1 {
            font-size: clamp(28px, 5vw, 36px);
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: var(--space-sm);
            color: var(--color-dark);
        }

        .intro__subtitle {
            font-size: 18px;
            color: var(--color-muted);
            margin-bottom: var(--space-lg);
        }

        .intro__meta {
            display: flex;
            justify-content: center;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
            font-size: 14px;
            color: var(--color-muted);
        }

        .intro__meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .intro__meta-item svg {
            width: 18px;
            height: 18px;
            stroke: var(--color-accent);
            stroke-width: 2;
            fill: none;
        }

        .intro__sections {
            text-align: left;
            background: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .intro__sections-title {
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-muted);
            margin-bottom: var(--space-sm);
        }

        .intro__sections-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-xs);
            font-size: 14px;
            color: var(--color-dark);
        }

        .intro__sections-list span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .intro__sections-list span::before {
            content: "";
            width: 6px;
            height: 6px;
            background: var(--color-accent);
            border-radius: 50%;
            flex-shrink: 0;
        }

        /* ========================================
           BUTTONS
           ======================================== */

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            font-family: var(--font);
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            border-radius: 8px;
            transition: all 180ms ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .btn-primary {
            background: var(--color-accent);
            color: var(--color-white);
            border-color: var(--color-accent);
        }

        .btn-primary:hover {
            background: var(--color-accent-hover);
            border-color: var(--color-accent-hover);
        }

        .btn-secondary {
            background: transparent;
            color: var(--color-accent);
            border-color: var(--color-accent);
        }

        .btn-secondary:hover {
            background: var(--color-light);
        }

        .btn-lg {
            padding: 16px 36px;
            font-size: 17px;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ========================================
           QUIZ SECTION
           ======================================== */

        .quiz-section {
            background: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: 16px;
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
        }

        .quiz-section__header {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid var(--color-border);
        }

        .quiz-section__number {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            background: var(--color-accent);
            color: var(--color-white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 15px;
        }

        .quiz-section__info h2 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .quiz-section__info p {
            font-size: 14px;
            color: var(--color-muted);
        }

        .quiz-section__score {
            margin-left: auto;
            text-align: right;
        }

        .quiz-section__score-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--color-dark);
        }

        .quiz-section__score-label {
            font-size: 12px;
            color: var(--color-muted);
        }

        /* ========================================
           QUIZ QUESTIONS
           ======================================== */

        .quiz-question {
            padding: var(--space-sm) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .quiz-question:last-child {
            border-bottom: none;
        }

        .quiz-question__text {
            font-size: 15px;
            font-weight: 500;
            margin-bottom: var(--space-sm);
            color: var(--color-dark);
        }

        .quiz-question__options {
            display: flex;
            gap: var(--space-xs);
            flex-wrap: wrap;
        }

        .quiz-option {
            padding: 8px 16px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 150ms ease;
            background: var(--color-white);
        }

        .quiz-option:hover {
            border-color: var(--color-accent);
            background: var(--color-light);
        }

        .quiz-option.selected {
            border-color: var(--color-accent);
            background: var(--color-accent);
            color: var(--color-white);
        }

        .quiz-option.selected-bad {
            border-color: var(--color-danger);
            background: var(--color-danger);
            color: var(--color-white);
        }

        .quiz-option.selected-warning {
            border-color: var(--color-warning);
            background: var(--color-warning);
            color: var(--color-white);
        }

        .quiz-option.selected-good {
            border-color: var(--color-success);
            background: var(--color-success);
            color: var(--color-white);
        }

        /* Multi-select checkboxes */
        .quiz-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 14px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            transition: all 150ms ease;
            background: var(--color-white);
            margin-bottom: 8px;
        }

        .quiz-checkbox:hover {
            border-color: var(--color-accent);
            background: var(--color-light);
        }

        .quiz-checkbox.checked {
            border-color: var(--color-accent);
            background: var(--color-light);
        }

        .quiz-checkbox__box {
            width: 20px;
            height: 20px;
            border: 2px solid var(--color-border);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 150ms ease;
        }

        .quiz-checkbox.checked .quiz-checkbox__box {
            background: var(--color-accent);
            border-color: var(--color-accent);
        }

        .quiz-checkbox__box svg {
            width: 14px;
            height: 14px;
            stroke: white;
            stroke-width: 3;
            opacity: 0;
            transition: opacity 150ms ease;
        }

        .quiz-checkbox.checked .quiz-checkbox__box svg {
            opacity: 1;
        }

        /* ========================================
           NAVIGATION
           ======================================== */

        .quiz-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: var(--space-md);
        }

        .quiz-nav__back {
            font-size: 14px;
            color: var(--color-muted);
            text-decoration: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .quiz-nav__back:hover {
            color: var(--color-dark);
        }

        .quiz-nav__back svg {
            width: 16px;
            height: 16px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        /* ========================================
           RESULTS SCREEN
           ======================================== */

        .results {
            max-width: 640px;
            margin: 0 auto;
        }

        .results__header {
            text-align: center;
            margin-bottom: var(--space-lg);
        }

        .results__score-ring {
            width: 160px;
            height: 160px;
            margin: 0 auto var(--space-md);
            position: relative;
        }

        .results__score-ring svg {
            transform: rotate(-90deg);
        }

        .results__score-ring circle {
            fill: none;
            stroke-width: 12;
        }

        .results__score-ring .bg {
            stroke: var(--color-border);
        }

        .results__score-ring .progress {
            stroke: var(--color-accent);
            stroke-linecap: round;
            transition: stroke-dashoffset 1s ease;
        }

        .results__score-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .results__score-number {
            font-size: 42px;
            font-weight: 700;
            color: var(--color-dark);
            line-height: 1;
        }

        .results__score-label {
            font-size: 14px;
            color: var(--color-muted);
        }

        .results__grade {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 100px;
            font-size: 15px;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .results__grade--good {
            background: var(--color-success-bg);
            color: var(--color-success);
        }

        .results__grade--warning {
            background: var(--color-warning-bg);
            color: var(--color-warning);
        }

        .results__grade--danger {
            background: var(--color-danger-bg);
            color: var(--color-danger);
        }

        .results__summary {
            font-size: 17px;
            color: var(--color-muted);
        }

        /* Section Breakdown */
        .results__breakdown {
            background: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: var(--space-md);
            margin-bottom: var(--space-md);
        }

        .results__breakdown-title {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--color-muted);
            margin-bottom: var(--space-sm);
        }

        .results__breakdown-item {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: 10px 0;
            border-bottom: 1px solid var(--color-border);
        }

        .results__breakdown-item:last-child {
            border-bottom: none;
        }

        .results__breakdown-name {
            flex: 1;
            font-size: 14px;
            font-weight: 500;
        }

        .results__breakdown-bar {
            width: 100px;
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
        }

        .results__breakdown-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .results__breakdown-fill--good { background: var(--color-success); }
        .results__breakdown-fill--warning { background: var(--color-warning); }
        .results__breakdown-fill--danger { background: var(--color-danger); }

        .results__breakdown-score {
            font-size: 14px;
            font-weight: 600;
            width: 40px;
            text-align: right;
        }

        /* Recommendations */
        .results__recommendations {
            margin-bottom: var(--space-lg);
        }

        .results__recommendations-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: var(--space-sm);
        }

        .results__recommendations-subtitle {
            font-size: 14px;
            color: var(--color-muted);
            margin-bottom: var(--space-md);
        }

        .recommendation-card {
            background: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
        }

        .recommendation-card__header {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
        }

        .recommendation-card__icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .recommendation-card__icon--danger {
            background: var(--color-danger-bg);
            color: var(--color-danger);
        }

        .recommendation-card__icon--warning {
            background: var(--color-warning-bg);
            color: var(--color-warning);
        }

        .recommendation-card__icon svg {
            width: 14px;
            height: 14px;
            stroke: currentColor;
            stroke-width: 2.5;
            fill: none;
        }

        .recommendation-card__title {
            font-size: 15px;
            font-weight: 600;
        }

        .recommendation-card__section {
            font-size: 12px;
            color: var(--color-muted);
            margin-top: 2px;
        }

        .recommendation-card__body {
            font-size: 14px;
            color: var(--color-muted);
            line-height: 1.6;
        }

        .recommendation-card__body ul {
            margin-top: 8px;
            padding-left: 20px;
        }

        .recommendation-card__body li {
            margin-bottom: 4px;
        }

        /* Lead Capture */
        .results__capture {
            background: var(--color-dark);
            border-radius: 16px;
            padding: var(--space-lg);
            color: var(--color-white);
            text-align: center;
            margin-bottom: var(--space-lg);
        }

        .results__capture h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .results__capture p {
            font-size: 15px;
            opacity: 0.8;
            margin-bottom: var(--space-md);
        }

        .capture-form {
            max-width: 360px;
            margin: 0 auto;
        }

        .capture-form__input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: var(--color-white);
            font-family: var(--font);
            font-size: 15px;
            margin-bottom: var(--space-sm);
        }

        .capture-form__input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .capture-form__input:focus {
            outline: none;
            border-color: var(--color-accent);
        }

        .capture-form__checkbox {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            text-align: left;
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: var(--space-sm);
            cursor: pointer;
        }

        .capture-form__checkbox input {
            margin-top: 2px;
            width: 16px;
            height: 16px;
            accent-color: var(--color-accent);
            flex-shrink: 0;
        }

        .capture-form__bonus {
            display: inline-block;
            background: var(--color-accent);
            color: white;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 4px;
        }

        .capture-form .btn {
            width: 100%;
            margin-top: var(--space-sm);
        }

        .capture-form__skip {
            margin-top: var(--space-sm);
            font-size: 13px;
            opacity: 0.6;
            cursor: pointer;
        }

        .capture-form__skip:hover {
            opacity: 1;
        }

        /* Actions */
        .results__actions {
            display: flex;
            gap: var(--space-sm);
            justify-content: center;
            flex-wrap: wrap;
        }

        /* ========================================
           FOOTER
           ======================================== */

        .footer {
            text-align: center;
            padding: var(--space-lg) 0;
            font-size: 13px;
            color: var(--color-muted);
        }

        .footer a {
            color: var(--color-accent);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        .footer__content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
        }

        /* Language Switcher */
        .lang-switcher {
            position: relative;
            display: inline-block;
        }

        .lang-switcher__btn {
            display: flex;
            align-items: center;
            gap: 6px;
            background: transparent;
            border: 1px solid var(--color-border);
            color: var(--color-muted);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 180ms ease;
        }

        .lang-switcher__btn:hover {
            border-color: var(--color-accent);
            color: var(--color-dark);
        }

        .lang-switcher__btn svg {
            width: 12px;
            height: 12px;
            transition: transform 180ms ease;
        }

        .lang-switcher.open .lang-switcher__btn svg {
            transform: rotate(180deg);
        }

        .lang-switcher__menu {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            margin-bottom: 8px;
            background: var(--color-white);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            min-width: 160px;
            max-height: 300px;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transition: all 180ms ease;
            z-index: 100;
        }

        .lang-switcher.open .lang-switcher__menu {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .lang-switcher__option {
            display: block;
            width: 100%;
            padding: 10px 14px;
            text-align: left;
            background: transparent;
            border: none;
            color: var(--color-dark);
            font-size: 14px;
            cursor: pointer;
            transition: background 120ms ease;
        }

        .lang-switcher__option:hover {
            background: var(--color-light);
        }

        .lang-switcher__option.active {
            background: var(--color-light);
            font-weight: 600;
        }

        .lang-switcher__option:first-child {
            border-radius: 8px 8px 0 0;
        }

        .lang-switcher__option:last-child {
            border-radius: 0 0 8px 8px;
        }

        /* ========================================
           RESPONSIVE
           ======================================== */

        @media (max-width: 768px) {
            .header__link,
            .header__cta {
                display: none;
            }

            .header__mobile-toggle {
                display: block;
            }
        }

        @media (max-width: 600px) {
            .intro__sections-list {
                grid-template-columns: 1fr;
            }

            .intro__meta {
                flex-direction: column;
                gap: var(--space-sm);
            }

            .quiz-section {
                padding: var(--space-md);
            }

            .quiz-section__header {
                flex-wrap: wrap;
            }

            .quiz-section__score {
                width: 100%;
                text-align: left;
                margin-left: 0;
                margin-top: var(--space-sm);
            }

            .results__breakdown-bar {
                width: 60px;
            }
        }

        /* Contact Modal */
        .contact-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .contact-modal.active {
            display: flex;
        }

        .contact-modal__content {
            background: white;
            border-radius: 12px;
            max-width: 480px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }

        .contact-modal__header {
            padding: 24px 24px 0;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .contact-modal__title {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-dark);
            margin: 0;
        }

        .contact-modal__close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--color-muted);
            padding: 0;
            line-height: 1;
        }

        .contact-modal__close:hover {
            color: var(--color-dark);
        }

        .contact-modal__body {
            padding: 20px 24px 24px;
        }

        .contact-modal__subtitle {
            font-size: 14px;
            color: var(--color-muted);
            margin: 0 0 20px;
        }

        .contact-modal__field {
            margin-bottom: 16px;
        }

        .contact-modal__label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: var(--color-dark);
            margin-bottom: 6px;
        }

        .contact-modal__input,
        .contact-modal__textarea,
        .contact-modal__select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 14px;
            font-family: var(--font);
            background: white;
        }

        .contact-modal__input:focus,
        .contact-modal__textarea:focus,
        .contact-modal__select:focus {
            outline: none;
            border-color: var(--color-accent);
            box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        }

        .contact-modal__textarea {
            resize: vertical;
            min-height: 100px;
        }

        .contact-modal__submit {
            width: 100%;
            background: var(--color-accent);
            color: white;
            padding: 14px 24px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            font-family: var(--font);
            margin-top: 8px;
        }

        .contact-modal__submit:hover {
            background: var(--color-accent-hover);
        }

        .contact-modal__submit:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .contact-modal__success {
            text-align: center;
            padding: 20px 0;
        }

        .contact-modal__success-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .contact-modal__success-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--color-dark);
            margin-bottom: 8px;
        }

        .contact-modal__success-text {
            font-size: 14px;
            color: var(--color-muted);
        }
    </style>

    <!-- Analytics -->
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5PYH0SJWEW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-5PYH0SJWEW');
    </script>
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "rfdccvjnjx");
    </script>
    <!-- Vercel Analytics -->
    <script>
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>

    <!-- ========================================
         HEADER
         ======================================== -->

    <header class="header">
        <div class="container header__inner">
            <a href="./index.html" class="header__logo">
                <img src="../assets/logos/Horizontal-Logo.svg" alt="Review My Emails">
            </a>
            <div class="header__progress" id="headerProgress" style="display: none;">
                <div class="header__progress-bar">
                    <div class="header__progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <span id="progressText">0 / 10</span>
            </div>
            <nav class="header__nav">
                <a href="./done-for-you.html" class="header__link" data-i18n="nav.how_it_works">Nasıl Çalışır</a>
                <a href="./pricing.html" class="header__link" data-i18n="nav.pricing">Fiyatlandırma</a>
                <a href="./sos-hotline.html" class="header__link" data-i18n="nav.sos_hotline">SOS Hattı</a>
                <a href="https://anchor.reviewmyemails.com" class="header__cta" data-i18n="nav.cta">Listemi Temizle</a>
                <button class="header__mobile-toggle" onclick="openMobileNav()" aria-label="Open menu" data-i18n-aria="ui.menu_open">
                    <svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                </button>
            </nav>
        </div>
    </header>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav" id="mobileNav">
        <div class="mobile-nav__header">
            <a href="./index.html" class="header__logo">
                <img src="../assets/logos/Horizontal-Logo.svg" alt="Review My Emails" height="40">
            </a>
            <button class="mobile-nav__close" onclick="closeMobileNav()" aria-label="Close menu" data-i18n-aria="ui.menu_close">
                <svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <div class="mobile-nav__links">
            <a href="./done-for-you.html" class="mobile-nav__link" data-i18n="nav.how_it_works">Nasıl Çalışır</a>
            <a href="./pricing.html" class="mobile-nav__link" data-i18n="nav.pricing">Fiyatlandırma</a>
            <a href="./sos-hotline.html" class="mobile-nav__link" data-i18n="nav.sos_hotline">SOS Hattı</a>
            <a href="./about.html" class="mobile-nav__link" data-i18n="nav.about">Hakkımızda</a>
            <a href="./partner.html" class="mobile-nav__link" data-i18n="nav.partner">Ortaklar</a>
        </div>
        <div class="mobile-nav__cta">
            <a href="https://anchor.reviewmyemails.com" data-i18n="nav.cta">Listemi Temizle</a>
        </div>
    </nav>

    <!-- ========================================
         INTRO SCREEN
         ======================================== -->

    <div class="screen active" id="introScreen">
        <div class="container">
            <div class="intro">
                <span class="intro__badge" data-i18n="audit.badge">Ücretsiz Öz Değerlendirme</span>
                <h1 data-i18n="audit.title">Gelen Kutusu Yerleşimi Öz Denetimi</h1>
                <p class="intro__subtitle" data-i18n="audit.subtitle">Çoğu göndericinin asla kontrol etmediği şeyler. Bunu aylık kullanın. Dürüst olun. Sorunlar gelir düşmeden önce böyle yakalanır.</p>

                <div style="background: var(--color-light); border-radius: 12px; padding: var(--space-md); margin-bottom: var(--space-md); text-align: left;">
                    <p style="font-size: 14px; color: var(--color-dark); margin: 0;"><strong data-i18n="audit.important">Önemli:</strong> <span data-i18n="audit.disclaimer">Önemli: Bu denetim genel en iyi uygulamaları kapsar. Her işletme farklıdır. Aylık bir bültenin günlük SaaS uyarısından farklı ihtiyaçları vardır. Buradaki bazı öğeler sizin için hiç geçerli olmayabilir. Amaç farkındalık, mükemmel puan değil.</span></p>
                </div>

                <div class="intro__meta">
                    <div class="intro__meta-item">
                        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        <span data-i18n="audit.meta_time">5-7 dakika</span>
                    </div>
                    <div class="intro__meta-item">
                        <svg viewBox="0 0 24 24"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                        <span data-i18n="audit.meta_sections">10 bölüm</span>
                    </div>
                    <div class="intro__meta-item">
                        <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                        <span data-i18n="audit.meta_tips">Kişiselleştirilmiş ipuçları</span>
                    </div>
                </div>

                <div class="intro__sections">
                    <div class="intro__sections-title" data-i18n="audit.what_cover">Neleri kapsayacağız</div>
                    <div class="intro__sections-list">
                        <span data-i18n="audit.section_automation">Otomasyon Zamanlaması</span>
                        <span data-i18n="audit.section_header">Üstbilgi ve Altbilgi Hijyeni</span>
                        <span data-i18n="audit.section_tracking">İzleme Alan Adı Riski</span>
                        <span data-i18n="audit.section_engagement">Etkileşim Mantığı</span>
                        <span data-i18n="audit.section_layout">Düzen Kalıbı Riski</span>
                        <span data-i18n="audit.section_sendtime">Gönderim Zamanı Mantığı</span>
                        <span data-i18n="audit.section_migration">ESP Geçiş Riski</span>
                        <span data-i18n="audit.section_subject">Konu ve Önizleme Güveni</span>
                        <span data-i18n="audit.section_spam">Spam Klasörü Görünümü</span>
                        <span data-i18n="audit.section_validation">Doğrulama Sıklığı</span>
                    </div>
                </div>

                <button class="btn btn-primary btn-lg" onclick="startQuiz()" data-i18n="audit.start_button">Denetimi Başlat</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         QUIZ SCREEN
         ======================================== -->

    <div class="screen" id="quizScreen">
        <div class="container">
            <div id="quizContent"></div>

            <div class="quiz-nav">
                <a class="quiz-nav__back" id="backBtn" onclick="previousSection()">
                    <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                    <span data-i18n="audit.back">Geri</span>
                </a>
                <button class="btn btn-primary" id="nextBtn" onclick="nextSection()" data-i18n="audit.next_section">Sonraki Bölüm</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         RESULTS SCREEN
         ======================================== -->

    <div class="screen" id="resultsScreen">
        <div class="container">
            <div class="results" id="resultsContent"></div>
        </div>
    </div>

    <!-- ========================================
         FOOTER
         ======================================== -->

    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <p><span data-i18n="audit.built_by">Tarafından yapıldı</span> <a href="./index.html">Review My Emails</a> · <a href="./done-for-you.html" data-i18n="audit.get_cleaned">Listenizi Temizletin</a> · <a href="./sos-hotline.html">SOS Hotline</a></p>
                <div class="lang-switcher" id="langSwitcher">
                    <button class="lang-switcher__btn" onclick="toggleLangMenu()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2v3"/><path d="M11 19l4-9 4 9M13 17h6"/></svg>
                        <span id="currentLang">English</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
                    </button>
                    <div class="lang-switcher__menu" id="langMenu">
                        <button class="lang-switcher__option active" data-lang="en">English</button>
                        <button class="lang-switcher__option" data-lang="gr">Ελληνικά</button>
                        <button class="lang-switcher__option" data-lang="br">Português (BR)</button>
                        <button class="lang-switcher__option" data-lang="es">Español</button>
                        <button class="lang-switcher__option" data-lang="fr">Français</button>
                        <button class="lang-switcher__option" data-lang="de">Deutsch</button>
                        <button class="lang-switcher__option" data-lang="ar">العربية</button>
                        <button class="lang-switcher__option" data-lang="tr">Türkçe</button>
                        <button class="lang-switcher__option" data-lang="th">ไทย</button>
                        <button class="lang-switcher__option" data-lang="id">Bahasa Indonesia</button>
                        <button class="lang-switcher__option" data-lang="vi">Tiếng Việt</button>
                        <button class="lang-switcher__option" data-lang="km">ភាសាខ្មែរ</button>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- ========================================
         MOBILE NAVIGATION
         ======================================== -->
    <script>
        function openMobileNav() {
            document.getElementById('mobileNav').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileNav() {
            document.getElementById('mobileNav').classList.remove('active');
            document.body.style.overflow = '';
        }
    </script>

    <!-- ========================================
         QUIZ DATA & LOGIC
         ======================================== -->

    <script>
        // ========================================
        // QUIZ DATA
        // ========================================

        const quizData = {
            sections: [
                {
                    id: 'automation',
                    title: 'Automation Timing',
                    description: 'How your automated emails behave',
                    weight: 1.0,
                    questions: [
                        {
                            id: 'auto_instant',
                            text: 'Do any emails fire within 60 seconds of an open?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'high',
                            tip: {
                                title: 'Instant triggers look automated',
                                body: 'Gmail tracks interaction timing patterns. Human behavior is messy. Replace instant triggers with delay windows (5-15 min ranges).'
                            }
                        },
                        {
                            id: 'auto_stack',
                            text: 'Do multiple automations stack back to back?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Stacked automations overwhelm recipients',
                                body: 'Build cooldown periods between sequences. Add daily send caps per contact to prevent bombardment.'
                            }
                        },
                        {
                            id: 'auto_opens_only',
                            text: 'Are follow-ups triggered by opens only?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Open-only triggers are unreliable',
                                body: 'Apple MPP inflates opens. Mix trigger types: clicks + time + behavior. Use clicks as your primary signal.'
                            }
                        },
                        {
                            id: 'auto_fixed_delays',
                            text: 'Do you use fixed delays instead of ranges?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'low',
                            tip: {
                                title: 'Fixed delays create patterns',
                                body: 'Use ranges not exact numbers (e.g., 5-15 min instead of exactly 10 min). Randomization looks more human.'
                            }
                        },
                        {
                            id: 'auto_throttle',
                            text: 'Do you throttle bulk sends?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Unthrottled sends spike suspiciously',
                                body: 'Spread sends over time. ESPs and mailbox providers notice volume spikes and may throttle or filter you.'
                            }
                        },
                        {
                            id: 'auto_daily_cap',
                            text: 'Do you cap daily sends per user?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'No daily cap = potential spam complaints',
                                body: 'Add daily send caps per contact. Even engaged users can hit fatigue if they receive too many emails in one day.'
                            }
                        }
                    ]
                },
                {
                    id: 'header_footer',
                    title: 'Header & Footer Hygiene',
                    description: 'What filters see when they crawl your HTML',
                    weight: 0.9,
                    questions: [
                        {
                            id: 'hf_header_tall',
                            text: 'Is your header taller than a phone screen?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Tall headers hide your message',
                                body: 'Shrink header. Move primary CTA higher. Users should see value before scrolling.'
                            }
                        },
                        {
                            id: 'hf_cta_visible',
                            text: 'Is your main CTA visible without scrolling?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Below-fold CTAs get missed',
                                body: 'Move primary CTA above the fold. Test on mobile devices where screen real estate is limited.'
                            }
                        },
                        {
                            id: 'hf_links_working',
                            text: 'Are all links in your emails working?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Broken links hurt deliverability',
                                body: 'SpamAssassin rules explicitly scan for broken links. Test every email before sending. Kill dead social links.'
                            }
                        },
                        {
                            id: 'hf_address_real',
                            text: 'Is your physical address real and current?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Fake addresses are a compliance red flag',
                                body: 'CAN-SPAM requires a valid physical address. Filters check for this. Use a real address or registered agent.'
                            }
                        },
                        {
                            id: 'hf_unsub_oneclick',
                            text: 'Is your unsubscribe one-click?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Difficult unsubscribe = spam complaints',
                                body: 'Make unsubscribe obvious and one-click. Gmail and Yahoo now require list-unsubscribe headers. Hidden unsubscribes drive complaints.'
                            }
                        },
                        {
                            id: 'hf_domains_match',
                            text: 'Do your brand domains match your sender domain?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Mismatched domains look phishy',
                                body: 'Link domains should match sender domain. Filters flag mismatches as potential phishing.'
                            }
                        },
                        {
                            id: 'hf_shorteners',
                            text: 'Do you use URL shorteners (bit.ly, etc)?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'high',
                            tip: {
                                title: 'URL shorteners are spam signals',
                                body: 'Spammers use shorteners to hide destinations. Use your own branded tracking domain instead.'
                            }
                        }
                    ]
                },
                {
                    id: 'tracking_domain',
                    title: 'Tracking Domain Risk',
                    description: 'Domain reputation is shared and inherited',
                    weight: 1.2,
                    questions: [
                        {
                            id: 'td_shared_brands',
                            text: 'Do multiple brands share the same tracking domain?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'high',
                            tip: {
                                title: 'Shared domains share reputation damage',
                                body: 'One brand = one domain. Cisco Talos and Proofpoint confirm domain-level reputation scoring. Bad sender poisons everyone.'
                            }
                        },
                        {
                            id: 'td_client_domain',
                            text: 'Do clients or partners use your tracking domain?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'high',
                            tip: {
                                title: 'Client behavior affects your domain',
                                body: 'Never share tracking domains across clients. Their bad practices become your reputation problem.'
                            }
                        },
                        {
                            id: 'td_dns_locked',
                            text: 'Is your DNS locked and secure?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Unsecured DNS is a hijacking risk',
                                body: 'Lock your DNS registrar. Enable 2FA. DNS hijacking can destroy your sending reputation overnight.'
                            }
                        },
                        {
                            id: 'td_domain_warmed',
                            text: 'Is your tracking domain properly warmed?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Cold domains get filtered',
                                body: 'Warm links gradually with real engagement. New or dormant domains sending volume immediately look suspicious.'
                            }
                        },
                        {
                            id: 'td_domain_age',
                            text: 'Is your domain older than 30 days?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'New domains are untrusted',
                                body: 'Domain age matters. New domains have no reputation. Wait at least 30 days before high-volume sending.'
                            }
                        },
                        {
                            id: 'td_blocklist_monitoring',
                            text: 'Do you monitor blocklists for your domain?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Blocklisting can happen silently',
                                body: 'Monitor blocklists regularly. Use Google Postmaster, Microsoft SNDS, or third-party tools. Early detection = faster recovery.'
                            }
                        }
                    ]
                },
                {
                    id: 'engagement',
                    title: 'Engagement Logic',
                    description: 'How you define and track subscriber engagement',
                    weight: 1.3,
                    questions: [
                        {
                            id: 'eng_definition',
                            text: 'What signals define "engaged" for you?',
                            type: 'multi',
                            options: ['Opens', 'Clicks', 'Replies', 'Purchases', 'Site visits'],
                            minGood: 2,
                            tip: {
                                title: 'Single-signal engagement is unreliable',
                                body: 'Use multiple signals. Opens are unreliable (Apple MPP). Clicks, replies, and purchases are stronger indicators of real engagement.'
                            }
                        },
                        {
                            id: 'eng_window',
                            text: 'What engagement time window do you use?',
                            type: 'choice',
                            options: [
                                { label: '14 days', value: 14 },
                                { label: '30 days', value: 30 },
                                { label: '60 days', value: 60 },
                                { label: '90 days', value: 90 },
                                { label: '180 days', value: 180 },
                                { label: 'No window set', value: 0 }
                            ],
                            contextual: true,
                            tip: {
                                title: 'Engagement window should match your business',
                                body: 'There is no universal "right" window. Daily newsletters need tighter windows (30 days). Monthly updates can use longer windows (90-180 days). The key is having one.'
                            }
                        },
                        {
                            id: 'eng_isp_segment',
                            text: 'Do you segment engagement by ISP (Gmail vs Outlook vs Yahoo)?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'ISPs have different filtering logic',
                                body: 'Gmail, Outlook, and Yahoo filter differently. Segment by ISP to identify which mailbox providers need attention. Problems often show up in one ISP first.'
                            }
                        },
                        {
                            id: 'eng_apple_opens',
                            text: 'Do you track Apple opens differently?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Apple MPP inflates open rates',
                                body: 'Apple Mail Privacy Protection pre-fetches images, making opens unreliable. Ignore Apple opens or weight them lower. Focus on clicks for Apple users.'
                            }
                        },
                        {
                            id: 'eng_decay',
                            text: 'Do you decay engagement scores over time?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Old engagement is not current engagement',
                                body: 'A click from 6 months ago is worth less than one from last week. Decay scores so recent activity matters more.'
                            }
                        },
                        {
                            id: 'eng_suppress_cold',
                            text: 'Do you automatically suppress cold users?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Mailing cold users tanks your reputation',
                                body: 'Auto-suppress inactive users. Build re-engagement flows first, then suppress non-responders. Stop mailing dead segments.'
                            }
                        }
                    ]
                },
                {
                    id: 'layout',
                    title: 'Layout Pattern Risk',
                    description: 'How predictable your emails look to filters',
                    weight: 0.7,
                    questions: [
                        {
                            id: 'lay_same_template',
                            text: 'Do you use the same template for every send?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'low',
                            tip: {
                                title: 'Identical templates create patterns',
                                body: 'Spam filters use Bayesian pattern matching. Uniform structure is a red flag. Rotate templates occasionally.'
                            }
                        },
                        {
                            id: 'lay_same_cta',
                            text: 'Is your CTA always in the same location?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'low',
                            tip: {
                                title: 'Consistent CTA placement can look templated',
                                body: 'Move CTA positions occasionally. Mix text links with buttons. Break predictable patterns.'
                            }
                        },
                        {
                            id: 'lay_ratio',
                            text: 'Is your text-to-image ratio always the same?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'low',
                            tip: {
                                title: 'Over-optimized layouts look automated',
                                body: 'Mix text-heavy emails with visual ones. Change structure monthly. Too-perfect ratios resemble bulk automation templates.'
                            }
                        }
                    ]
                },
                {
                    id: 'send_time',
                    title: 'Send Time Logic',
                    description: 'When and how you schedule sends',
                    weight: 0.8,
                    questions: [
                        {
                            id: 'st_same_hour',
                            text: 'Do you send at the exact same hour every day?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Predictable timing = bot pattern',
                                body: 'Return Path research showed varied send times improve placement vs rigid schedules. Use send windows, not exact times.'
                            }
                        },
                        {
                            id: 'st_same_minute',
                            text: 'Do you send at the exact same minute?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'low',
                            tip: {
                                title: 'Exact timestamps look automated',
                                body: 'Randomize minutes within your send window. 9:00 AM exactly every day is more suspicious than 9:03, 9:11, 9:07.'
                            }
                        },
                        {
                            id: 'st_timezone',
                            text: 'Do you use timezone logic for sends?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'One-timezone sends miss engagement',
                                body: 'Segment by timezone. Sending at 9 AM EST hits West Coast at 6 AM. Localized timing improves opens and engagement.'
                            }
                        },
                        {
                            id: 'st_engagement_based',
                            text: 'Do you use engagement-based send time optimization?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'low',
                            tip: {
                                title: 'Past engagement predicts best send times',
                                body: 'Use past engagement timing to personalize send times. Send when each user is most likely to engage.'
                            }
                        }
                    ]
                },
                {
                    id: 'migration',
                    title: 'ESP Migration Risk',
                    description: 'Risks when switching email service providers',
                    weight: 1.0,
                    questions: [
                        {
                            id: 'mig_imported_suppressions',
                            text: 'Did you import old suppression lists during migration?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'high',
                            contextual: true,
                            tip: {
                                title: 'Old suppressions hide spam traps',
                                body: 'Spamhaus confirms recycled traps live inside old suppression files. Re-validate suppressions before importing. Better yet, start fresh.'
                            }
                        },
                        {
                            id: 'mig_imported_bounces',
                            text: 'Did you import old hard bounce lists?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Old bounces should be discarded',
                                body: 'Hard bounces from years ago are useless. Those addresses may be recycled as traps. Do not import them.'
                            }
                        },
                        {
                            id: 'mig_revalidated',
                            text: 'Did you re-validate your list after migration?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Migration is validation opportunity',
                                body: 'Validate before import to the new ESP. Migration is the perfect time to clean. Start fresh with a verified list.'
                            }
                        },
                        {
                            id: 'mig_warmup',
                            text: 'Did you warm up as a new sender after migration?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'New IPs need warming',
                                body: 'Changing ESPs often means new IPs. Warm as new sender. Throttle volumes. Your old reputation does not transfer automatically.'
                            }
                        }
                    ]
                },
                {
                    id: 'subject_preview',
                    title: 'Subject vs Preview Trust',
                    description: 'How your subject line and preview text work together',
                    weight: 0.9,
                    questions: [
                        {
                            id: 'sp_match',
                            text: 'Do your subject and preview align with email content?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Misleading metadata kills trust',
                                body: 'Google Postmaster flags misleading metadata as engagement killers. Subject, preview, and content should tell a consistent story.'
                            }
                        },
                        {
                            id: 'sp_clickbait',
                            text: 'Do you use clickbait subject lines?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'Clickbait drives complaints',
                                body: 'Overpromising in subjects leads to disappointment and spam reports. Test curiosity vs clarity. Keep promises realistic.'
                            }
                        },
                        {
                            id: 'sp_caps',
                            text: 'Do you use ALL CAPS in subject lines?',
                            type: 'yesno',
                            goodAnswer: 'no',
                            badImpact: 'medium',
                            tip: {
                                title: 'ALL CAPS triggers spam filters',
                                body: 'SpamAssassin and other filters penalize ALL CAPS. It looks like shouting. Use sentence case instead.'
                            }
                        },
                        {
                            id: 'sp_spam_words',
                            text: 'Do you avoid spam trigger words (FREE, URGENT, etc)?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Spam trigger words add filter points',
                                body: 'Words like FREE, URGENT, ACT NOW add points to spam scores. They are not automatic death, but they add up. Use sparingly.'
                            }
                        }
                    ]
                },
                {
                    id: 'spam_render',
                    title: 'Spam Folder Rendering',
                    description: 'How your emails look when they land in spam',
                    weight: 0.8,
                    questions: [
                        {
                            id: 'sr_tested',
                            text: 'Have you tested how your emails render in spam folders?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Spam folders strip HTML and images',
                                body: 'Litmus shows CTAs disappear in spam views on Outlook and Yahoo. Test what users see if they check spam.'
                            }
                        },
                        {
                            id: 'sr_images_load',
                            text: 'Do your images load in spam view?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'low',
                            tip: {
                                title: 'Spam folders often block images',
                                body: 'Use fallback text and ALT tags. Important content should not depend solely on images loading.'
                            }
                        },
                        {
                            id: 'sr_text_cta',
                            text: 'Do you have plain text CTAs as fallbacks?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Image-only CTAs can disappear',
                                body: 'Add plain text links as backups. If images are blocked, users should still be able to take action.'
                            }
                        },
                        {
                            id: 'sr_dark_mode',
                            text: 'Have you tested dark mode rendering?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'low',
                            tip: {
                                title: 'Dark mode can break your design',
                                body: 'Many users have dark mode enabled. Test that your emails are readable and buttons are visible in dark mode.'
                            }
                        }
                    ]
                },
                {
                    id: 'validation',
                    title: 'Validation Frequency',
                    description: 'How often you clean and validate your list',
                    weight: 1.2,
                    questions: [
                        {
                            id: 'val_frequency',
                            text: 'How often do you validate/clean your list?',
                            type: 'choice',
                            options: [
                                { label: 'Monthly', value: 'monthly', score: 100 },
                                { label: 'Quarterly', value: 'quarterly', score: 75 },
                                { label: 'Yearly', value: 'yearly', score: 40 },
                                { label: 'Never', value: 'never', score: 0 }
                            ],
                            tip: {
                                title: 'Lists decay constantly',
                                body: 'Experian reports 22-30% data decay yearly across B2B lists. HubSpot reports ~28% decay from job changes and abandoned inboxes. Validate regularly.'
                            }
                        },
                        {
                            id: 'val_imports',
                            text: 'Do you validate new imports before sending?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Unvalidated imports are risky',
                                body: 'New lists can contain traps, invalid addresses, and competitors. Always validate before adding to your sending list.'
                            }
                        },
                        {
                            id: 'val_bounces',
                            text: 'Do you automatically suppress hard bounces?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'high',
                            tip: {
                                title: 'Repeated hard bounces damage reputation',
                                body: 'Auto-suppress hard bounces immediately. Continuing to mail invalid addresses signals you do not maintain your list.'
                            }
                        },
                        {
                            id: 'val_unknowns',
                            text: 'Do you monitor and handle unknown/risky addresses?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Unknowns need monitoring',
                                body: 'Addresses that validate but behave strangely (no engagement, catch-alls) need attention. Monitor risky domains and patterns.'
                            }
                        },
                        {
                            id: 'val_role',
                            text: 'Do you suppress or segment role accounts (info@, sales@)?',
                            type: 'yesno',
                            goodAnswer: 'yes',
                            badImpact: 'medium',
                            tip: {
                                title: 'Role accounts are shared inboxes',
                                body: 'Role accounts (info@, support@, sales@) are read by multiple people and often generate complaints. Suppress or handle separately.'
                            }
                        }
                    ]
                }
            ]
        };

        // ========================================
        // STATE
        // ========================================

        let currentSection = 0;
        let answers = {};
        let sectionScores = {};
        const sessionId = 'audit_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);

        // Track audit events to MongoDB
        function trackAuditEvent(event, data = {}) {
            fetch('/api/quiz-track', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    sessionId: sessionId,
                    quizType: 'self-audit',
                    event: event,
                    timestamp: new Date().toISOString(),
                    ...data
                })
            }).catch(err => console.log('Tracking error:', err));
        }

        // ========================================
        // FUNCTIONS
        // ========================================

        function startQuiz() {
            document.getElementById('introScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            document.getElementById('headerProgress').style.display = 'flex';
            renderSection(0);
            trackAuditEvent('started');
        }

        function renderSection(index) {
            const section = quizData.sections[index];
            currentSection = index;

            // Update progress
            const progress = ((index) / quizData.sections.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `${index + 1} / ${quizData.sections.length}`;

            // Update nav buttons
            document.getElementById('backBtn').style.visibility = index === 0 ? 'hidden' : 'visible';
            document.getElementById('nextBtn').textContent = index === quizData.sections.length - 1 ? 'See Results' : 'Next Section';

            // Render section
            let html = `
                <div class="quiz-section">
                    <div class="quiz-section__header">
                        <div class="quiz-section__number">${index + 1}</div>
                        <div class="quiz-section__info">
                            <h2>${section.title}</h2>
                            <p>${section.description}</p>
                        </div>
                        <div class="quiz-section__score">
                            <div class="quiz-section__score-value" id="sectionScore">--</div>
                            <div class="quiz-section__score-label">Section Score</div>
                        </div>
                    </div>
            `;

            section.questions.forEach((q, qIndex) => {
                html += `<div class="quiz-question" data-question="${q.id}">`;
                html += `<div class="quiz-question__text">${q.text}</div>`;
                html += `<div class="quiz-question__options">`;

                if (q.type === 'yesno') {
                    const currentAnswer = answers[q.id];
                    const yesClass = currentAnswer === 'yes' ? getAnswerClass(q, 'yes') : '';
                    const noClass = currentAnswer === 'no' ? getAnswerClass(q, 'no') : '';

                    html += `<div class="quiz-option ${yesClass}" onclick="selectAnswer('${q.id}', 'yes', '${q.type}', this)">Yes</div>`;
                    html += `<div class="quiz-option ${noClass}" onclick="selectAnswer('${q.id}', 'no', '${q.type}', this)">No</div>`;
                } else if (q.type === 'choice') {
                    q.options.forEach(opt => {
                        const isSelected = answers[q.id] === opt.value;
                        const selectedClass = isSelected ? 'selected' : '';
                        html += `<div class="quiz-option ${selectedClass}" onclick="selectAnswer('${q.id}', '${opt.value}', '${q.type}', this)">${opt.label}</div>`;
                    });
                } else if (q.type === 'multi') {
                    html += `</div><div class="quiz-question__checkboxes">`;
                    q.options.forEach(opt => {
                        const isChecked = answers[q.id] && answers[q.id].includes(opt);
                        const checkedClass = isChecked ? 'checked' : '';
                        html += `
                            <div class="quiz-checkbox ${checkedClass}" onclick="toggleMulti('${q.id}', '${opt}', this)">
                                <div class="quiz-checkbox__box">
                                    <svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12"/></svg>
                                </div>
                                <span>${opt}</span>
                            </div>
                        `;
                    });
                }

                html += `</div></div>`;
            });

            html += `</div>`;

            document.getElementById('quizContent').innerHTML = html;
            updateSectionScore();
        }

        function getAnswerClass(question, answer) {
            if (question.goodAnswer === answer) {
                return 'selected-good';
            } else if (question.badImpact === 'high') {
                return 'selected-bad';
            } else if (question.badImpact === 'medium') {
                return 'selected-warning';
            } else {
                return 'selected';
            }
        }

        function selectAnswer(questionId, value, type, element) {
            answers[questionId] = value;

            // Update UI
            const container = element.parentElement;
            container.querySelectorAll('.quiz-option').forEach(opt => {
                opt.className = 'quiz-option';
            });

            // Find the question to determine color
            const section = quizData.sections[currentSection];
            const question = section.questions.find(q => q.id === questionId);

            if (type === 'yesno') {
                element.className = 'quiz-option ' + getAnswerClass(question, value);
            } else {
                element.className = 'quiz-option selected';
            }

            // Track answer to MongoDB
            trackAuditEvent('answer', {
                question: questionId,
                answer: value,
                section: section.id,
                sectionTitle: section.title
            });

            updateSectionScore();
        }

        function toggleMulti(questionId, value, element) {
            if (!answers[questionId]) {
                answers[questionId] = [];
            }

            const index = answers[questionId].indexOf(value);
            if (index > -1) {
                answers[questionId].splice(index, 1);
                element.classList.remove('checked');
            } else {
                answers[questionId].push(value);
                element.classList.add('checked');
            }

            // Track multi-select to MongoDB
            const section = quizData.sections[currentSection];
            trackAuditEvent('answer', {
                question: questionId,
                answer: answers[questionId],
                section: section.id,
                sectionTitle: section.title
            });

            updateSectionScore();
        }

        function updateSectionScore() {
            const section = quizData.sections[currentSection];
            let earned = 0;
            let possible = 0;

            section.questions.forEach(q => {
                if (q.type === 'yesno') {
                    possible += 100;
                    if (answers[q.id] === q.goodAnswer) {
                        earned += 100;
                    }
                } else if (q.type === 'choice') {
                    possible += 100;
                    const answer = answers[q.id];
                    if (answer) {
                        const option = q.options.find(o => o.value === answer || o.value === parseInt(answer));
                        if (option && option.score !== undefined) {
                            earned += option.score;
                        } else if (option) {
                            // Non-zero answer is considered valid
                            earned += answer !== 'never' && answer !== 0 ? 75 : 0;
                        }
                    }
                } else if (q.type === 'multi') {
                    possible += 100;
                    if (answers[q.id] && answers[q.id].length >= (q.minGood || 2)) {
                        earned += 100;
                    } else if (answers[q.id] && answers[q.id].length > 0) {
                        earned += 50;
                    }
                }
            });

            const score = possible > 0 ? Math.round((earned / possible) * 100) : 0;
            sectionScores[section.id] = score;

            const scoreEl = document.getElementById('sectionScore');
            if (scoreEl) {
                const answeredCount = section.questions.filter(q => answers[q.id] !== undefined).length;
                if (answeredCount > 0) {
                    scoreEl.textContent = score + '%';
                    scoreEl.style.color = score >= 80 ? 'var(--color-success)' : score >= 60 ? 'var(--color-warning)' : 'var(--color-danger)';
                }
            }
        }

        function previousSection() {
            if (currentSection > 0) {
                renderSection(currentSection - 1);
                window.scrollTo(0, 0);
            }
        }

        function nextSection() {
            if (currentSection < quizData.sections.length - 1) {
                renderSection(currentSection + 1);
                window.scrollTo(0, 0);
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');
            document.getElementById('headerProgress').style.display = 'none';

            // Calculate overall score with weights
            let totalWeightedScore = 0;
            let totalWeight = 0;

            quizData.sections.forEach(section => {
                const score = sectionScores[section.id] || 0;
                totalWeightedScore += score * section.weight;
                totalWeight += section.weight;
            });

            const overallScore = Math.round(totalWeightedScore / totalWeight);

            // Track audit completion to MongoDB
            trackAuditEvent('completed', {
                result: overallScore >= 80 ? 'good' : overallScore >= 60 ? 'warning' : 'danger',
                overallScore: overallScore,
                sectionScores: sectionScores,
                answers: answers
            });

            // Determine grade
            let grade, gradeClass, summary;
            if (overallScore >= 80) {
                grade = 'Strong Foundation';
                gradeClass = 'good';
                summary = 'Your email practices are solid. Focus on the few areas flagged below to optimize further.';
            } else if (overallScore >= 60) {
                grade = 'Needs Attention';
                gradeClass = 'warning';
                summary = 'You have some good practices but several areas need work before they impact your deliverability.';
            } else {
                grade = 'High Risk';
                gradeClass = 'danger';
                summary = 'Multiple issues detected that are likely hurting your inbox placement. Prioritize the recommendations below.';
            }

            // Generate recommendations grouped by section
            const recsBySection = generateRecommendationsBySection();
            const hasIssues = Object.keys(recsBySection).length > 0;

            // Render results
            let html = `
                <div class="results__header">
                    <div class="results__score-ring">
                        <svg width="160" height="160" viewBox="0 0 160 160">
                            <circle class="bg" cx="80" cy="80" r="70"/>
                            <circle class="progress" cx="80" cy="80" r="70"
                                stroke-dasharray="440"
                                stroke-dashoffset="${440 - (440 * overallScore / 100)}"
                                style="stroke: var(--color-${gradeClass === 'good' ? 'success' : gradeClass === 'warning' ? 'warning' : 'danger'})"/>
                        </svg>
                        <div class="results__score-value">
                            <div class="results__score-number">${overallScore}</div>
                            <div class="results__score-label">out of 100</div>
                        </div>
                    </div>
                    <span class="results__grade results__grade--${gradeClass}">${grade}</span>
                    <p class="results__summary">${summary}</p>
                </div>

                <div style="background: var(--color-light); border-radius: 12px; padding: var(--space-md); margin-bottom: var(--space-md);">
                    <p style="font-size: 14px; color: var(--color-dark); margin: 0;"><strong>Remember:</strong> Not every item applies to every business. A score of 70 might be perfectly fine for your use case. These are guidelines, not mandates. Use your judgment about what matters for your specific situation.</p>
                </div>

                <div class="results__breakdown">
                    <div class="results__breakdown-title">Score by Section</div>
                    ${quizData.sections.map(section => {
                        const score = sectionScores[section.id] || 0;
                        const fillClass = score >= 80 ? 'good' : score >= 60 ? 'warning' : 'danger';
                        return `
                            <div class="results__breakdown-item">
                                <span class="results__breakdown-name">${section.title}</span>
                                <div class="results__breakdown-bar">
                                    <div class="results__breakdown-fill results__breakdown-fill--${fillClass}" style="width: ${score}%"></div>
                                </div>
                                <span class="results__breakdown-score" style="color: var(--color-${fillClass})">${score}%</span>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;

            // Show ALL recommendations grouped by section
            if (hasIssues) {
                html += `<div class="results__recommendations">
                    <h3 class="results__recommendations-title">Action Items by Section</h3>
                    <p class="results__recommendations-subtitle">Everything flagged based on your answers. Review what applies to you:</p>
                `;

                Object.values(recsBySection).forEach(section => {
                    const fillClass = section.score >= 80 ? 'good' : section.score >= 60 ? 'warning' : 'danger';
                    html += `
                        <div style="background: var(--color-white); border: 1px solid var(--color-border); border-radius: 12px; padding: var(--space-md); margin-bottom: var(--space-md);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm); padding-bottom: var(--space-sm); border-bottom: 1px solid var(--color-border);">
                                <h4 style="font-size: 16px; font-weight: 600; margin: 0;">${section.title}</h4>
                                <span style="font-size: 14px; font-weight: 600; color: var(--color-${fillClass});">${section.score}%</span>
                            </div>
                            ${section.recs.map(rec => `
                                <div style="padding: var(--space-sm) 0; border-bottom: 1px solid var(--color-border);">
                                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                                        <div style="width: 20px; height: 20px; border-radius: 50%; background: var(--color-${rec.severity === 'danger' ? 'danger' : 'warning'}-bg); color: var(--color-${rec.severity === 'danger' ? 'danger' : 'warning'}); display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 2px;">
                                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>
                                        </div>
                                        <div>
                                            <div style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">${rec.title}</div>
                                            <div style="font-size: 13px; color: var(--color-muted); line-height: 1.5;">${rec.body}</div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                });

                html += `</div>`;
            }

            // SOS Hotline plug
            html += `
                <div style="background: linear-gradient(135deg, var(--color-dark) 0%, #0f3d3a 100%); border-radius: 16px; padding: var(--space-lg); color: white; margin-bottom: var(--space-md);">
                    <h3 style="font-size: 20px; font-weight: 700; margin-bottom: var(--space-xs);">Not Sure What Applies to You?</h3>
                    <p style="font-size: 15px; opacity: 0.85; margin-bottom: var(--space-md);">Every business is different. What's critical for a daily sender might be irrelevant for a monthly newsletter. If you're unsure which items actually matter for your situation, talk to someone who's seen it all.</p>
                    <div style="display: flex; align-items: center; gap: var(--space-md); padding: var(--space-md); background: rgba(255,255,255,0.1); border-radius: 12px; margin-bottom: var(--space-md);">
                        <div style="flex: 1;">
                            <div style="font-size: 14px; font-weight: 600; color: var(--color-accent); margin-bottom: 4px;">Free. No pitch. Just answers.</div>
                            <div style="font-size: 14px; opacity: 0.8;">The SOS Hotline connects you with YT, a deliverability specialist who's cleaned thousands of lists and diagnosed hundreds of sending problems. Ask anything.</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                        <button type="button" onclick="openContactModal()" class="btn" style="background: var(--color-accent); color: white; flex: 1; justify-content: center;">Talk to a Specialist</button>
                        <a href="./sos-hotline.html" class="btn" style="background: rgba(255,255,255,0.15); color: white; flex: 1; justify-content: center;">Learn About SOS Hotline</a>
                    </div>
                </div>
            `;

            // Testimonial
            html += `
                <div style="background: var(--color-white); border: 1px solid var(--color-border); border-radius: 12px; padding: var(--space-md); margin-bottom: var(--space-md); text-align: center;">
                    <p style="font-size: 17px; font-style: italic; color: var(--color-dark); margin-bottom: var(--space-sm);">"Review My Emails goes beyond standard tools by identifying risky patterns others miss."</p>
                    <p style="font-size: 14px; color: var(--color-muted); font-weight: 500;">Julia S., Italy</p>
                </div>
            `;

            // Lead capture
            html += `
                <div class="results__capture">
                    <h3>Save Your Results</h3>
                    <p>Get a detailed report emailed and optionally join our waitlist.</p>
                    <form class="capture-form" onsubmit="submitCapture(event)">
                        <input type="email" class="capture-form__input" placeholder="your@email.com" required id="captureEmail">
                        <label class="capture-form__checkbox">
                            <input type="checkbox" id="captureNewsletter">
                            <span>Monthly deliverability insights (no spam, just signal) + <span class="capture-form__bonus">1,500 credits when we launch</span></span>
                        </label>
                        <label class="capture-form__checkbox">
                            <input type="checkbox" id="captureWaitlist">
                            <span>Notify me when self-serve launches</span>
                        </label>
                        <label class="capture-form__checkbox">
                            <input type="checkbox" id="captureContact">
                            <span>Have someone reach out to discuss my audit results (no sales pitch)</span>
                        </label>
                        <button type="submit" class="btn btn-primary">Send My Report</button>
                        <div class="capture-form__skip" onclick="skipCapture()">Skip, I'll just review on screen</div>
                    </form>
                </div>

                <div class="results__actions">
                    <button class="btn btn-secondary" onclick="restartQuiz()">Retake Audit</button>
                    <a href="./done-for-you.html" class="btn btn-primary">Get Expert List Cleaning</a>
                </div>
            `;

            document.getElementById('resultsContent').innerHTML = html;
            window.scrollTo(0, 0);
        }

        function generateRecommendationsBySection() {
            const bySection = {};

            quizData.sections.forEach(section => {
                const sectionRecs = [];

                section.questions.forEach(q => {
                    const answer = answers[q.id];
                    let shouldRecommend = false;
                    let severity = 'warning';

                    if (q.type === 'yesno' && answer !== undefined && answer !== q.goodAnswer) {
                        shouldRecommend = true;
                        severity = q.badImpact === 'high' ? 'danger' : 'warning';
                    } else if (q.type === 'choice' && answer !== undefined) {
                        const option = q.options.find(o => o.value === answer || o.value === parseInt(answer));
                        if (option && option.score !== undefined && option.score < 60) {
                            shouldRecommend = true;
                            severity = option.score < 40 ? 'danger' : 'warning';
                        } else if (answer === 'never' || answer === 0) {
                            shouldRecommend = true;
                            severity = 'danger';
                        }
                    } else if (q.type === 'multi') {
                        if (!answer || answer.length < (q.minGood || 2)) {
                            shouldRecommend = true;
                            severity = 'warning';
                        }
                    }

                    if (shouldRecommend && q.tip) {
                        sectionRecs.push({
                            title: q.tip.title,
                            body: q.tip.body,
                            severity: severity
                        });
                    }
                });

                if (sectionRecs.length > 0) {
                    bySection[section.id] = {
                        title: section.title,
                        score: sectionScores[section.id] || 0,
                        recs: sectionRecs
                    };
                }
            });

            return bySection;
        }

        async function submitCapture(event) {
            event.preventDefault();
            const email = document.getElementById('captureEmail').value;
            const newsletter = document.getElementById('captureNewsletter').checked;
            const waitlist = document.getElementById('captureWaitlist').checked;
            const contact = document.getElementById('captureContact').checked;
            const btn = event.target.querySelector('button');

            btn.disabled = true;
            btn.textContent = btn.dataset.i18nSending || 'Sending...';

            try {
                const response = await fetch('/api/quiz-results', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: email,
                        quizType: 'self-audit',
                        result: Object.keys(sectionScores).reduce((worst, key) => {
                            return sectionScores[key] < (sectionScores[worst] || 100) ? key : worst;
                        }, ''),
                        overallScore: Math.round(Object.values(sectionScores).reduce((a, b) => a + b, 0) / Object.keys(sectionScores).length),
                        sectionScores: sectionScores,
                        answers: answers,
                        subscribeNewsletter: newsletter,
                        joinWaitlist: waitlist,
                        requestContact: contact,
                        source: 'audit_results'
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    // Track capture
                    va('event', { name: 'Audit_Capture', data: { newsletter: newsletter, waitlist: waitlist, contact: contact } });

                    // Show thank you message
                    let message = 'Check your inbox for your detailed audit report.';
                    if (newsletter) {
                        message += ' You\'ve also earned 1,500 free credits.';
                    }
                    if (contact) {
                        message += ' We\'ll reach out soon.';
                    }
                    document.querySelector('.results__capture').innerHTML = `
                        <h3>Report Sent!</h3>
                        <p>${message}</p>
                    `;
                } else {
                    throw new Error(data.error || 'Failed to submit');
                }
            } catch (error) {
                console.error('Audit capture error:', error);
                btn.disabled = false;
                btn.textContent = btn.dataset.i18nRetry || 'Try Again';
            }
        }

        function skipCapture() {
            document.querySelector('.results__capture').style.display = 'none';
        }

        function restartQuiz() {
            answers = {};
            sectionScores = {};
            currentSection = 0;
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('introScreen').classList.add('active');
            window.scrollTo(0, 0);
        }

        // Track CTA button clicks
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.btn').forEach(function(btn) {
                btn.addEventListener('click', function() {
                    var destination = this.getAttribute('href') || '';
                    var label = this.textContent.trim();
                    va('event', { name: 'CTA_Clicked', data: { label: label, destination: destination, page: 'audit' } });
                });
            });
        });

        // Contact Modal
        function openContactModal() {
            document.getElementById('contactModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            va('event', { name: 'Contact_Modal_Opened', data: { source: 'audit' } });
        }

        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close on backdrop click
        document.getElementById('contactModal').addEventListener('click', function(e) {
            if (e.target === this) closeContactModal();
        });

        // Close on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeContactModal();
        });

        async function submitContactForm(e) {
            e.preventDefault();
            const btn = document.getElementById('contactSubmitBtn');
            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const timezone = document.getElementById('contactTimezone').value;
            const message = document.getElementById('contactMessage').value.trim();

            btn.disabled = true;
            btn.textContent = btn.dataset.i18nSending || 'Sending...';

            try {
                const response = await fetch('/api/contact-request', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        name,
                        email,
                        timezone,
                        message,
                        source: 'audit',
                        quizResult: sectionScores || null,
                        quizAnswers: answers || null
                    })
                });

                const data = await response.json();
                if (data.success) {
                    document.querySelector('.contact-modal__body').innerHTML = `
                        <div class="contact-modal__success">
                            <div class="contact-modal__success-icon">✓</div>
                            <div class="contact-modal__success-title">Request Received</div>
                            <p class="contact-modal__success-text">We'll get back to you within 24 hours.</p>
                        </div>
                    `;
                    va('event', { name: 'Contact_Form_Submitted', data: { source: 'audit' } });
                } else {
                    throw new Error(data.error || 'Failed to submit');
                }
            } catch (error) {
                console.error('Contact form error:', error);
                btn.disabled = false;
                btn.textContent = btn.dataset.i18nRetry || 'Try Again';
            }
        }
    </script>

<!-- Contact Modal -->
<div class="contact-modal" id="contactModal">
    <div class="contact-modal__content">
        <div class="contact-modal__header">
            <h3 class="contact-modal__title" data-i18n="quiz.modal_title">Bir Uzmanla Konuşun</h3>
            <button class="contact-modal__close" onclick="closeContactModal()" aria-label="Close" data-i18n-aria="ui.close">&times;</button>
        </div>
        <div class="contact-modal__body">
            <p class="contact-modal__subtitle" data-i18n="modal.subtitle">Durumunuzu bize anlatın, 24 saat içinde size geri dönelim.</p>
            <form id="contactForm" onsubmit="submitContactForm(event)">
                <div class="contact-modal__field">
                    <label class="contact-modal__label" data-i18n="modal.form_name">İsim</label>
                    <input type="text" class="contact-modal__input" id="contactName" required placeholder="Your name" data-i18n-placeholder="modal.name_placeholder">
                </div>
                <div class="contact-modal__field">
                    <label class="contact-modal__label" data-i18n="modal.form_email">E-posta</label>
                    <input type="email" class="contact-modal__input" id="contactEmail" required placeholder="your@email.com" data-i18n-placeholder="ui.email_placeholder">
                </div>
                <div class="contact-modal__field">
                    <label class="contact-modal__label" data-i18n="modal.form_timezone">Saat Dilimi</label>
                    <select class="contact-modal__select" id="contactTimezone">
                        <option value="" data-i18n="modal.form_timezone_placeholder">Saat diliminizi seçin (isteğe bağlı)</option>
                        <option value="America/New_York" data-i18n="modal.timezone_et">Doğu Saati (ET)</option>
                        <option value="America/Chicago" data-i18n="modal.timezone_ct">Merkezi Saat (CT)</option>
                        <option value="America/Denver" data-i18n="modal.timezone_mt">Dağ Saati (MT)</option>
                        <option value="America/Los_Angeles" data-i18n="modal.timezone_pt">Pasifik Saati (PT)</option>
                        <option value="America/Anchorage" data-i18n="modal.timezone_alaska">Alaska Saati</option>
                        <option value="Pacific/Honolulu" data-i18n="modal.timezone_hawaii">Hawaii Saati</option>
                        <option value="Europe/London" data-i18n="modal.timezone_london">Londra (GMT/BST)</option>
                        <option value="Europe/Paris" data-i18n="modal.timezone_cet">Orta Avrupa Saati (CET)</option>
                        <option value="Europe/Athens" data-i18n="modal.timezone_eet">Doğu Avrupa Saati</option>
                        <option value="Asia/Dubai" data-i18n="modal.timezone_gulf">Körfez Standart Saati</option>
                        <option value="Asia/Kolkata" data-i18n="modal.timezone_india">Hindistan Standart Saati</option>
                        <option value="Asia/Singapore" data-i18n="modal.timezone_singapore">Singapur Saati</option>
                        <option value="Asia/Tokyo" data-i18n="modal.timezone_japan">Japonya Standart Saati</option>
                        <option value="Australia/Sydney" data-i18n="modal.timezone_sydney">Avustralya Doğu Saati</option>
                        <option value="Pacific/Auckland" data-i18n="modal.timezone_nz">Yeni Zelanda Saati</option>
                    </select>
                </div>
                <div class="contact-modal__field">
                    <label class="contact-modal__label" data-i18n="modal.form_message">Mesaj</label>
                    <textarea class="contact-modal__textarea" id="contactMessage" placeholder="Tell us about your situation..." data-i18n-placeholder="modal.message_placeholder"></textarea>
                </div>
                <button type="submit" class="contact-modal__submit" id="contactSubmitBtn" data-i18n="modal.form_submit" data-i18n-sending="modal.form_sending" data-i18n-retry="modal.form_try_again">Mesaj Gönder</button>
            </form>
        </div>
    </div>
</div>

<!-- Translation Loader -->
<script src="/js/i18n.js"></script>

<!-- Language Switcher -->
<script>
    (function() {
        const LANGUAGES = {
            en: 'English',
            gr: 'Ελληνικά',
            br: 'Português (BR)',
            es: 'Español',
            fr: 'Français',
            de: 'Deutsch',
            ar: 'العربية',
            tr: 'Türkçe',
            th: 'ไทย',
            id: 'Bahasa Indonesia',
            vi: 'Tiếng Việt',
            km: 'ភាសាខ្មែរ'
        };

        // Detect current language from URL path
        function getCurrentLang() {
            const path = window.location.pathname;
            const match = path.match(/^\/(gr|br|es|fr|de|ar|tr|th|id|vi|km)\//);
            return match ? match[1] : 'en';
        }

        // Get current page filename
        function getCurrentPage() {
            const path = window.location.pathname;
            const parts = path.split('/').filter(Boolean);
            const lastPart = parts[parts.length - 1] || 'index.html';
            // If it's a language folder, get the next part
            if (['gr', 'br', 'es', 'fr', 'de', 'ar', 'tr', 'th', 'id', 'vi', 'km'].includes(lastPart)) {
                return 'index.html';
            }
            return lastPart.includes('.html') ? lastPart : 'index.html';
        }

        // Check if we're on the .gr domain
        function isGreekDomain() {
            return window.location.hostname === 'reviewmyemails.gr' || window.location.hostname === 'www.reviewmyemails.gr';
        }

        // Build URL for language switch
        function buildLangUrl(lang) {
            const page = getCurrentPage();
            const isGr = isGreekDomain();

            if (lang === 'en') {
                // English goes to root of .com
                if (isGr) {
                    return 'https://reviewmyemails.com/' + page;
                }
                return '/' + page;
            }

            if (lang === 'gr' && isGr) {
                // Greek on .gr stays on .gr
                return '/' + page;
            }

            if (isGr) {
                // Other languages on .gr redirect to .com
                return 'https://reviewmyemails.com/' + lang + '/' + page;
            }

            // On .com, navigate to language folder
            return '/' + lang + '/' + page;
        }

        // Fix all internal navigation links to use correct language path
            function fixNavigationLinks() {
                const currentLang = getCurrentLang();
                if (currentLang === 'en') return;
                const knownPages = ['index.html', 'about.html', 'pricing.html', 'done-for-you.html', 'sos-hotline.html', 'partner.html', 'quiz.html', 'audit.html'];
                const langBase = '/' + currentLang + '/';
                document.querySelectorAll('a[href]').forEach(link => {
                    const href = link.getAttribute('href');
                    if (!href || href.startsWith('http') || href.startsWith('#') || href.startsWith('/' + currentLang + '/')) return;
                    const pageName = href.replace('./', '').replace('../', '');
                    if (knownPages.includes(pageName)) {
                        link.setAttribute('href', langBase + pageName);
                    }
                });
            }

            // Initialize switcher
            function initLangSwitcher() {
                const currentLang = getCurrentLang();
                const currentLangEls = document.querySelectorAll('.current-lang-text');
                const options = document.querySelectorAll('.lang-switcher__option');

                currentLangEls.forEach(el => {
                    if (LANGUAGES[currentLang]) {
                        el.textContent = LANGUAGES[currentLang];
                    }
                });
                const currentLangEl = document.getElementById('currentLang');
                if (currentLangEl && LANGUAGES[currentLang]) {
                    currentLangEl.textContent = LANGUAGES[currentLang];
                }

                options.forEach(opt => {
                    opt.classList.remove('active');
                    if (opt.dataset.lang === currentLang) {
                        opt.classList.add('active');
                    }
                    opt.addEventListener('click', function() {
                        const lang = this.dataset.lang;
                        const url = buildLangUrl(lang);
                        window.location.href = url;
                    });
                });

                fixNavigationLinks();
            }

            // Toggle menu
            window.toggleLangMenu = function(id) {
                const switcherId = id || 'langSwitcher';
                document.getElementById(switcherId).classList.toggle('open');
            };

            // Close menu on outside click
            document.addEventListener('click', function(e) {
                document.querySelectorAll('.lang-switcher').forEach(switcher => {
                    if (!switcher.contains(e.target)) {
                        switcher.classList.remove('open');
                    }
                });
            });

        // Init on DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initLangSwitcher);
        } else {
            initLangSwitcher();
        }
    })();
</script>

</body>
</html>
